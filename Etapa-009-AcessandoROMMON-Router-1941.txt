!Autor: Robson Vaamonde
!Procedimentos em TI: http://procedimentosemti.com.br
!Bora para Prática: http://boraparapratica.com.br
!Robson Vaamonde: http://vaamonde.com.br
!Facebook Procedimentos em TI: https://www.facebook.com/ProcedimentosEmTi
!Facebook Bora para Prática: https://www.facebook.com/BoraParaPratica
!Instagram Procedimentos em TI: https://www.instagram.com/procedimentoem
!YouTUBE Bora Para Prática: https://www.youtube.com/boraparapratica
!Data de criação: 26/04/2020
!Data de atualização: 26/04/2020
!Versão: 0.01
!Testado e homologado no Cisco Packet Tracer 7.3 e GNS3 2.2.7

!PRIMEIRA ETAPA: parar a inicialização do Cisco IOS do Router 19.41
!DICA: no Cisco Packet Tracer utilizamos a combinação de teclas: Ctrl+C
!OBSERVAÇÃO: em equipamento reais, pode utilizar a combinação de teclas: Ctrl+Pause Break ou Ctrl+Backspace
!OBSERVAÇÃO: no aplicativo PuTTY você deve usar o Botão direito do Mouse na Barra de Título e utilizar a opção:
!Send Command: Break)

!Visualizando as opções de comandos do Modo ROMMON
rommon 1 >?

!Alterando o modo de inicialização do Cisco IOS do Router 1941
!DICA: o comando confreg alterar a forma como a inicialização do Cisco IOS ler os arquivos de configuração
!OBSERVAÇÃO: essa opção é utilizada para forçar o Router não ler as configurações do startup-config
!OBSERVAÇÃO: chave de registro em hexadecimal: 0x2142 (não ler as configurações do startup-config)
!OBSERVAÇÃO: chave de registro em hexadecimal: 0x2102 (ler as configurações do startup-config - padrão)
rommon 2 >confreg 0x2142

!Reinicializando o Router 1941 do Modo ROMMON
rommon 3 >reset

!Acessando o modo EXEC Privilégiado
enable

	!Visualizando as configurações de inicialização do Router 1941
	show version
	
	!Visualizando as configurações do startup-config
	show startup-config
	
	!Limpando as configurações do startup-config
	erase startup-config
	show startup-config
	
	!Acessando o modo de Configuração Global de comandos
	configure terminal
	
		!Alterando o modo de inicialização do Cisco IOS do Router 1941
		config-register 0x2102
		
		!Saindo de todos os níveis e voltando para o modo EXEC Privilegiado
		end
	
!Salvando as configurações da memória RAM para a memória NVRAM
write
	
!Reinicializando o Router 1941
reload

!Acessando o modo EXEC Privilégiado
enable

	!Visualizando as configurações de inicialização do Router 1941
	show version
	
	!Visualizando os arquivos no Flash Card
	show flash:
	
	!Copiando o arquivos do Flash Card startup-config para NVRAM
	copy flash: startup-config 
		startup-config 
	
	!Visualizando as configurações do startup-config
	show startup-config
	
	!Aplicando as configurações da NVRAM (startup-config) para a RAM (running-config)
	copy startup-config running-config
	
	!Salvando as configurações da memória RAM para a memória NVRAM
	write
	
	!Reinicializando o Router 1941
	reload
	
=====================================================================================
_01# Deixar o Switch inicializar normalmente;
_02# Após a inicialização, pressionar o Botão Mode por apróximadamente 15/20 segundos;
_03# O Switch vai entrar no modo de ROMMON e será reinicializado automaticamente.

=====================================================================================
Caso o Switch não volte para o estado de fábrica, utilizar os procedimentos abaixo:

1. Pressionar o botão MODE até o Switch ser reinicializar;
2. Na tela de inicialização, na mensagem de hardware, presssionar o botão MODE para cancelar o carregamento do IOS;
3. No modo ROMMON, digitar o comando: flash_init
4. Listar o contéudo da Flash: dir flash:
5. Renomear o arquivo config: rename flash:config.text flash:config.old
6. Reinicializar o Switch: boot
7. Limpar o arquivo statup-config: erase startup-config
8. Limpar as configurações de VLAN: delete flash:vlan.dat
9. Reinicializar o Switch: reload
