!Autor: Robson Vaamonde
!Procedimentos em TI: http://procedimentosemti.com.br
!Bora para Prática: http://boraparapratica.com.br
!Robson Vaamonde: http://vaamonde.com.br
!Facebook Procedimentos em TI: https://www.facebook.com/ProcedimentosEmTi
!Facebook Bora para Prática: https://www.facebook.com/BoraParaPratica
!Instagram Procedimentos em TI: https://www.instagram.com/procedimentoem
!YouTUBE Bora Para Prática: https://www.youtube.com/boraparapratica
!Data de criação: 22/05/2020
!Data de atualização: 22/05/2020
!Versão: 0.01
!Testado e homologado no Cisco Packet Tracer 7.3 e GNS3 2.2.7

!

!PRIMEIRA ETAPA: Configuração do STP e RSTP Portfast no Switche Layer 3 3560
!Acessando o modo EXEC Privilégiado
enable

	!Acessando o modo de Configuração Global de Comandos
	configure terminal
	
		!Configuração do STP do Switch Layer 3 para ser o Root Bridge das VLANs
		spanning-tree vlan 1,10,20,30,40,50,99-100 root primary
		
		!Configurando o RSTP no Switch Layer 3 3560
		spanning-tree mode rapid-pvst

		!Configurando o modo do STP para Rápida Mudança de Encaminhamento da Interface
		!DICA: diferente do comando spanning-tree portfast trunk, o comando spanning-tree portfast e utilizado somente
		!em interface configurada no modo de acesso, não deve ser utilizada em Interfaces configurada como Trunk
		!OBSERVAÇÃO: existe a possibilidade de configurar o Portfast Globalmente ou individualmente na Interface com o
		!comando: spanning-tree portfast em cada Interface
		spanning-tree portfast default

		!Configurando a Interface de Trunk com o Router 2911
		interface fastEthernet 0/24

			!Configurando o modo do STP para Rápida Mudança de Encaminhamento da Interface
			!DICA: em Portas Trunk (Tronco) conectadas em Roteadores ou Servidores é recomendado acelerar a velocidade de 
			!encaminhamento de quadros (Frames) nessas Interfaces, agilizando processo de convergência da topologia
			!OBSERVAÇÃO: essa configuração não deve ser utilizada em Interfaces de Trunk entre Switches na Topologia
			spanning-tree portfast trunk
			exit
			
		!Configurando a Poda (Pruning) das VLANs nas Interface de Trunk Giga0/1
		interface gigabitEthernet 0/1
			switchport trunk allowed
		
		!Configurando a Poda (Pruning) das VLANs nas Interface de Trunk Giga0/2
		interface gigabitEthernet 0/2
			switchport trunk allowed
write

!SEGUNDA ETAPA: Configuração do STP e RSTP Portfast nos Switches Layer 2 2960
enable
	configure terminal
		spanning-tree mode rapid-pvst
		spanning-tree portfast default
		end
write

!Visualizando as configurações da memória RAM
show running-config | section interface

!Verificando as informações das VLAN, VTP e Trunk
show vlan brief
show vlan id 10
show vlan name adm
show vtp status
show vtp counters
show interface status
show interface trunk
show interfaces gigabitEthernet 0/1 switchport